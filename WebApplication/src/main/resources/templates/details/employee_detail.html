<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta charset="UTF-8">
    <title th:text="#{view.employee_detail.title} + ' ' + ${employee.getLastName()}"></title>

    <link rel="stylesheet" th:href="@{/css/color.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">

    <!-- bootstrap -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<div th:replace="~{fragments/navbar}">Navbar</div>

<div class="container-fluid">
    <!-- content -->
    <div class="container">
        <!-- alerts -->
        <div>
            <div th:if="(${(param.edit != null)} or ${(param.create != null)} or ${(param.delete != null)} or ${(param.subordinate != null)})"
                 class="alert alert-success alert-dismissible fade show" role="success">
                <strong th:if="${(param.edit != null)}" th:text="#{view.course.alert.edit}"></strong>
                <strong th:if="${(param.create != null)}" th:text="#{view.course.alert.create}"></strong>
                <strong th:if="${(param.delete != null)}" th:text="#{not-implemented}"></strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>

        <h1 class="text-center mt-5" th:text="#{view.employee_detail.header} + ' ' + ${employee.getFirstName()} + ' ' + ${employee.getLastName()}"></h1>

        <form   method="post"
                th:action="@{'/e/' + ${id} + '/edit'}"
                th:object="${employee}" th:method="POST" novalidate>
            <div>
                <label for="first_name" th:text="#{view.employee_detail.first_name}"/>
                <input type="text" id="first_name" name="first_name" th:value="${employee.getFirstName()}">
            </div>
            <div>
                <label for="last_name" th:text="#{view.employee_detail.last_name}"/>
                <input type="text" id="last_name" name="last_name" th:value="${employee.getLastName()}">
            </div>
            <div>
                <label for="orion_login" th:text="#{view.employee_detail.orion_login}"/>
                <input type="text" id="orion_login" name="orion_login" th:value="${employee.getOrionLogin()}">
            </div>
            <div>
                <label for="email" th:text="#{view.employee_detail.email}"/>
                <input type="text" id="email" name="email" th:value="${employee.getEmailAddress()}">
            </div>
            <div>
                <label for="workplace" th:text="#{view.employee_detail.workplace}"/>
                <input type="text" id="workplace" name="workplace" th:value="${employee.getWorkplaceId()}">
            </div>
            <div>
                <label for="introduced" th:text="#{view.employee_detail.introduced}"/>
                <input type="text" id="introduced" name="introduced" th:value="${employee.getDateCreated()}">
            </div>
            <div>
                <label for="description" th:text="#{view.employee_detail.description}"/>
                <input type="text" id="description" name="description" th:value="${employee.getDescription()}">
            </div>
            <div class="col">
                <input id="form-submit" class="btn" type="submit"
                       th:value="#{view.employee_detail.submit}">
            </div>
        </form>
    </div>
</div>

<div>
    <h2 class="text-center mt-5" th:text="#{view.employee_detail.activity.header}"></h2>

    <div class="row">
        <table class="table">
            <thead>
            <tr>
                <th scope="col" th:text="#{view.course.table.shortcut}"></th>
                <th scope="col" th:text="#{view.course.table.students}"></th>
                <th scope="col" th:text="#{view.course.table.ra}"></th>
                <th scope="col" th:text="#{view.course.table.lecturer}"></th>
                <th scope="col" th:text="#{view.course.table.role}"></th>
                <th scope="col" th:text="#{view.course.table.lecture_hours}"></th>
                <th scope="col" th:text="#{view.course.table.exercise_hours}"></th>
                <th scope="col" th:text="#{view.course.table.others}"></th>
                <th scope="col" th:text="${projects.size()}"></th>
                <td></td>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="pro, proStats: ${projects}">
                <!-- Project-->
                <tr>
                    <td class="course-cell" th:text="${pro.getName()}"></td>
                    <td class="course-cell" th:text="${pro.getProjectManager().getLastName()}"></td>
<!--                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getWorker().getLastName()}"></td>-->
<!--                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getRole()}"></td>-->
<!--                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getTime()}"></td>-->
<!--                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getTime()}"></td>-->
<!--                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getIsCertain()}"></td>-->
<!--                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getIsCertain()}"></td>-->
                    <td class="course-cell">
                        <button class="btn collapsible btn-edit" th:onclick="'editAllocation('+${firstAllocations.get(crsStats.index).getId()}+')'"></button>
                    </td>
                </tr>
                <th:block th:each="all, allStat : ${pro.getProjectAllocations()}">
                    <tr>
                        <td class="course-cell" th:text="${all.getRole()}"></td>
                        <td class="course-cell" th:text="${all.getDateFrom()}"></td>
                        <td class="course-cell" th:text="${all.getDateUntil()}"></td>
                        <td class="course-cell" th:text="${all.getTime()}"></td>
                        <td class="course-cell" th:text="${all.getIsCertain()}"></td>
                        <td class="course-cell" th:text="${all.getDescription()()}"></td>
                        <td class="course-cell">
                            <button class="btn collapsible btn-edit" th:onclick="'editAllocation('+${all.getId()}+')'"></button>
                        </td>
                    </tr>
                </th:block>
            </th:block>
            </tbody>
        </table>
    </div>

    <div class="row">
        <table class="table">
            <thead>
            <tr>
<!--                <td></td>-->
                <th scope="col" th:text="#{view.course.table.shortcut}"></th>
                <th scope="col" th:text="#{view.course.table.students}"></th>
                <th scope="col" th:text="#{view.course.table.ra}"></th>
                <th scope="col" th:text="#{view.course.table.lecturer}"></th>
                <th scope="col" th:text="#{view.course.table.role}"></th>
                <th scope="col" th:text="#{view.course.table.lecture_hours}"></th>
                <th scope="col" th:text="#{view.course.table.exercise_hours}"></th>
                <th scope="col" th:text="#{view.course.table.others}"></th>
                <th scope="col" th:text="#{view.course.table.certain}"></th>
                <td></td>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="crs, crsStats: ${coursesAllocations}">
                <!-- Employee-->
                <tr>
<!--                    <td class="course-cell" th:rowspan="${crs.getCourseAllocations().size() + 1}">-->
<!--                        <a type="button" class="btn collapsible btn-detail" th:href="@{/c/{CRS_ID}/detail(CRS_ID=${crs.getId()})}"></a>-->
<!--                    </td>-->
                    <td class="course-cell" th:rowspan="${crs.getC().size() + 1}" th:text="${crs.getName()}"></td>
                    <td class="course-cell" th:rowspan="${crs.getCourseAllocations().size() + 1}" th:text="${crs.getNumberOfStudents()}"></td>
                    <td class="course-cell" th:rowspan="${crs.getCourseAllocations().size() + 1}" th:text="${crs.getCredits()}"></td>
                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getWorker().getLastName()}"></td>
                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getRole()}"></td>
                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getTime()}"></td>
                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getTime()}"></td>
                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getIsCertain()}"></td>
                    <td class="course-cell" th:text="${firstAllocations.get(crsStats.index).getIsCertain()}"></td>
                    <td class="course-cell">
                        <button class="btn collapsible btn-edit" th:onclick="'editAllocation('+${firstAllocations.get(crsStats.index).getId()}+')'"></button>
                    </td>
                </tr>
                <th:block th:each="all : ${crs.getCourseAllocations()}">
                    <tr>
                        <td class="course-cell" th:text="${all.getWorker().getLastName()}"></td>
                        <td class="course-cell" th:text="${all.getRole()}"></td>
                        <td class="course-cell" th:text="${all.getTime()}"></td>
                        <td class="course-cell" th:text="${all.getTime()}"></td>
                        <td class="course-cell" th:text="${all.getIsCertain()}"></td>
                        <td class="course-cell" th:text="${all.getIsCertain()}"></td>
                        <td class="course-cell">
                            <button class="btn collapsible btn-edit" th:onclick="'editAllocation('+${all.getId()}+')'"></button>
                        </td>
                    </tr>
                </th:block>
            </th:block>
            </tbody>
        </table>
    </div>

    <div class="row">
        <table class="table">
            <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col" th:text="#{view.function.table.name}"></th>
                <th scope="col" th:text="#{view.function.table.supervisor}"></th>
                <th scope="col" th:text="#{view.function.table.from}"></th>
                <th scope="col" th:text="#{view.function.table.until}"></th>
                <th scope="col" th:text="#{view.function.table.current-time}"></th>
                <th scope="col" th:text="#{view.function.table.certain}"></th>
                <th scope="col" th:text="#{view.function.table.description}"></th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="fnc, iStat : ${functions}">
                <!-- Employee-->
                <th:block th:if="${firstAllocations.get(iStat.index).getTime >= 0}">
                    <tr>
                        <td class="function-cell" th:rowspan="${fnc.getFunctionAllocations().size() + 1}">
                            <a type="button" class="btn collapsible btn-detail" th:href="@{/f/{FNC_ID}/detail(FNC_ID=${fnc.getId()})}"></a>
                        </td>
                        <td th:rowspan="${fnc.getFunctionAllocations().size() + 1}" th:text="${fnc.getName()}"></td>
                        <td th:rowspan="${fnc.getFunctionAllocations().size() + 1}" th:text="${fnc.getFunctionManager().getLastName()}"></td>
                        <td th:text="${firstAllocations.get(iStat.index).getDateFrom()}"></td>
                        <td th:text="${firstAllocations.get(iStat.index).getDateUntil()}"></td>
                        <td th:text="${firstAllocations.get(iStat.index).getTime()}"></td>
                        <td th:text="${firstAllocations.get(iStat.index).getIsCertain()}"></td>
                        <td th:text="${firstAllocations.get(iStat.index).getDescription()}"></td>
                        <td class="function-cell">
                            <button class="btn collapsible btn-edit" th:onclick="'editFunction('+${firstAllocations.get(iStat.index).getId()}+')'"></button>
                        </td>
                    </tr>
                    <th:block th:each="all, allStats : ${fnc.getFunctionAllocations()}">
                        <tr>
                            <td th:text="${all.getDateFrom()}"></td>
                            <td th:text="${all.getDateUntil()}"></td>
                            <td th:text="${all.getTime()}"></td>
                            <td th:text="${all.getIsCertain()}"></td>
                            <td th:text="${all.getDescription()}"></td>
                            <td class="function-cell">
                                <button class="btn collapsible btn-edit" th:onclick="'editFunction('+${all.getId()}+')'"></button>
                            </td>
                        </tr>
                    </th:block>
                </th:block>
            </th:block>
            </tbody>
        </table>
    </div>
</div>

<div th:replace="~{fragments/footer}">Footer</div>
</body>
</html>